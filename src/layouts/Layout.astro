---
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
}

const {
  title = 'Anh Quan (Alan) Tran | Software Engineer',
  description = 'Software engineer portfolio featuring projects, experience timeline, tech stack, and contact details.',
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link
      rel="icon"
      type="image/svg+xml"
      href={`${import.meta.env.BASE_URL}favicon.svg`}
    />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Mega:wght@100..900&display=swap" rel="stylesheet" />
  </head>
  <body class="bg-neutral-950 text-neutral-100 antialiased">
    <script is:inline>
      // Lock viewport â€” position:fixed on <html> prevents all scrolling
      var _h=document.documentElement.style;_h.position='fixed';_h.inset='0';_h.overflow='hidden';
      if('scrollRestoration' in history)history.scrollRestoration='manual';
      window.scrollTo(0,0);
    </script>

    <!-- Loading screen -->
    <div id="ls" aria-hidden="true" style="position:fixed;inset:0;z-index:99999;background:#0a0a0a;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2.5rem;">
      <div style="overflow:hidden;line-height:1.1;">
        <div id="ls-n" style="font-family:'Lexend Mega',sans-serif;font-size:clamp(2.2rem,9vw,7rem);font-weight:800;letter-spacing:.12em;color:#fff;transform:translateY(110%);transition:transform .75s cubic-bezier(.16,1,.3,1);white-space:nowrap;">ALAN TRAN</div>
      </div>
      <div style="width:min(360px,56vw);display:flex;flex-direction:column;gap:.75rem;">
        <div style="width:100%;height:1px;background:rgba(255,255,255,.12);border-radius:1px;overflow:hidden;position:relative;">
          <div id="ls-b" style="position:absolute;inset:0;transform:scaleX(0);transform-origin:left;background:#fff;transition:transform .12s linear;"></div>
        </div>
        <div style="display:flex;justify-content:space-between;font-family:ui-monospace,'Cascadia Code','Courier New',monospace;font-size:.65rem;letter-spacing:.2em;color:rgba(255,255,255,.35);text-transform:uppercase;">
          <span>Loading</span><span id="ls-p">0%</span>
        </div>
      </div>
    </div>

    <script is:inline>
    (function(){
      var o=document.getElementById('ls'),n=document.getElementById('ls-n'),
          b=document.getElementById('ls-b'),p=document.getElementById('ls-p'),
          v=0,done=false;

      setTimeout(function(){if(n)n.style.transform='translateY(0)'},80);

      function set(x){v=Math.min(100,Math.max(v,x));
        if(b)b.style.transform='scaleX('+(v/100)+')';
        if(p)p.textContent=Math.round(v)+'%';}

      var iv=setInterval(function(){if(v<85)set(v+(85-v)*.07)},50);

      function hide(){if(done)return;done=true;clearInterval(iv);set(100);
        setTimeout(function(){if(!o)return;
          o.style.transition='transform .85s cubic-bezier(.76,0,.24,1)';
          o.style.transform='translateY(-100%)';
          setTimeout(function(){
            if(o&&o.parentNode)o.parentNode.removeChild(o);
            var h=document.documentElement.style;h.position='';h.inset='';h.overflow='';
          },900);
        },350);}

      if(document.readyState==='complete')hide();
      else window.addEventListener('load',hide,{once:true});
    })();
    </script>

    <slot />
  </body>
</html>
